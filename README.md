# 효율적인 사이트 유지보수를 하기위한 리팩토링 샘플

#### 리팩토링 하려는 이유
* [구조]기존 페이지가 Controller 와 View 같이 구성이 되다보니 중복 이슈에 다한 코드가 계속 생산되는 비효율적인 구조
* [구조]비효율적인 코드가 많다보니 코드 읽는 시간이 많이 소요가 됨
* [보안]Form Validation 체크가 자바스크립트, 서버사이드에서 2중 체크를 하는 불편함
* [보안]Csrf 방어를 별도 하고 있지 않기 때문에 보안에 취약
* [보안]Sql Injection 취약한 문제
* [개발]PHP 5.5.* 버전을 사용하면서도 PHP 4버전의 개발을 하고있는 문제

#### 리팩토링 변경사항
* MVC 패턴으로 View 페이지에는 PHP 코드가 최대한 없도록 처리
* Form Validation 도입하여 서버사이드에서만 폼검증
* POST 접근 페이지는 무조건 Csrf token 체크하여 보안 강화
* PDO를 도입하여 Sql Injection 취약한 문제 일정부분 해소
* namespace 사용하므로서 동일 Class Name도 충돌 없이 호출
* 유현한 확장을 위해 폴더별로 열활을 구분하여 작성
* Model Class에 간단한 Crud 적용

#### 참고
* 보수적인 회사 원칙 때문에 Composer 사용 불가
   (PHP 언어를 이해하는 부분이 상급자와 다른 부분이 있어 외부 라이브러리 사용을 꺼려함...이유는 뜻모를 보안문제...)
* 희망적인건 PHP 5.5.* 버전을 사용한다는점
   - 문제는 지금 코딩은 PHP 4와 다를것 없다는것이 문제 ㅡㅡ
   - 상위 버전에서 제공하는 편의성과 구조를 사용하는 목적에도 리팩토링 하는 이유도 있음
   - 기능만 사용한다는 목적이 안니고 Modern PHP 흐름을 따르려고 한다.
